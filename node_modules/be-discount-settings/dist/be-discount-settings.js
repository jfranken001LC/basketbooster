(()=>{var Et=Object.defineProperty,Tt=Object.defineProperties;var $t=Object.getOwnPropertyDescriptors;var Ue=Object.getOwnPropertySymbols;var Nt=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable;var He=(t,e,n)=>e in t?Et(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,I=(t,e)=>{for(var n in e||(e={}))Nt.call(e,n)&&He(t,n,e[n]);if(Ue)for(var n of Ue(e))Pt.call(e,n)&&He(t,n,e[n]);return t},Y=(t,e)=>Tt(t,$t(e));var M=(t,e,n)=>new Promise((i,r)=>{var o=f=>{try{u(n.next(f))}catch(a){r(a)}},_=f=>{try{u(n.throw(f))}catch(a){r(a)}},u=f=>f.done?i(f.value):Promise.resolve(f.value).then(o,_);u((n=n.apply(t,e)).next())});var re,d,qe,me,j,Ie,Le,We,Re,ge,he,de,At,X={},Ve=[],Dt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,_e=Array.isArray;function A(t,e){for(var n in e)t[n]=e[n];return t}function ye(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Mt(t,e,n){var i,r,o,_={};for(o in e)o=="key"?i=e[o]:o=="ref"?r=e[o]:_[o]=e[o];if(arguments.length>2&&(_.children=arguments.length>3?re.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)_[o]===void 0&&(_[o]=t.defaultProps[o]);return ie(t,_,i,r,null)}function ie(t,e,n,i,r){var o={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r==null?++qe:r,__i:-1,__u:0};return r==null&&d.vnode!=null&&d.vnode(o),o}function F(t){return t.children}function W(t,e){this.props=t,this.context=e}function R(t,e){if(e==null)return t.__?R(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?R(t):null}function Ge(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Ge(t)}}function je(t){(!t.__d&&(t.__d=!0)&&j.push(t)&&!oe.__r++||Ie!=d.debounceRendering)&&((Ie=d.debounceRendering)||Le)(oe)}function oe(){for(var t,e,n,i,r,o,_,u=1;j.length;)j.length>u&&j.sort(We),t=j.shift(),u=j.length,t.__d&&(n=void 0,i=void 0,r=(i=(e=t).__v).__e,o=[],_=[],e.__P&&((n=A({},i)).__v=i.__v+1,d.vnode&&d.vnode(n),be(e.__P,n,i,e.__n,e.__P.namespaceURI,32&i.__u?[r]:null,o,r==null?R(i):r,!!(32&i.__u),_),n.__v=i.__v,n.__.__k[n.__i]=n,Ze(o,n,_),i.__e=i.__=null,n.__e!=r&&Ge(n)));oe.__r=0}function Je(t,e,n,i,r,o,_,u,f,a,c){var s,h,l,g,C,b,m,p=i&&i.__k||Ve,y=e.length;for(f=Ft(n,e,p,f,y),s=0;s<y;s++)(l=n.__k[s])!=null&&(h=l.__i==-1?X:p[l.__i]||X,l.__i=s,b=be(t,l,h,r,o,_,u,f,a,c),g=l.__e,l.ref&&h.ref!=l.ref&&(h.ref&&ke(h.ref,null,l),c.push(l.ref,l.__c||g,l)),C==null&&g!=null&&(C=g),(m=!!(4&l.__u))||h.__k===l.__k?f=ze(l,f,t,m):typeof l.type=="function"&&b!==void 0?f=b:g&&(f=g.nextSibling),l.__u&=-7);return n.__e=C,f}function Ft(t,e,n,i,r){var o,_,u,f,a,c=n.length,s=c,h=0;for(t.__k=new Array(r),o=0;o<r;o++)(_=e[o])!=null&&typeof _!="boolean"&&typeof _!="function"?(typeof _=="string"||typeof _=="number"||typeof _=="bigint"||_.constructor==String?_=t.__k[o]=ie(null,_,null,null,null):_e(_)?_=t.__k[o]=ie(F,{children:_},null,null,null):_.constructor===void 0&&_.__b>0?_=t.__k[o]=ie(_.type,_.props,_.key,_.ref?_.ref:null,_.__v):t.__k[o]=_,f=o+h,_.__=t,_.__b=t.__b+1,u=null,(a=_.__i=Ut(_,n,f,s))!=-1&&(s--,(u=n[a])&&(u.__u|=2)),u==null||u.__v==null?(a==-1&&(r>c?h--:r<c&&h++),typeof _.type!="function"&&(_.__u|=4)):a!=f&&(a==f-1?h--:a==f+1?h++:(a>f?h--:h++,_.__u|=4))):t.__k[o]=null;if(s)for(o=0;o<c;o++)(u=n[o])!=null&&(2&u.__u)==0&&(u.__e==i&&(i=R(u)),Qe(u,u));return i}function ze(t,e,n,i){var r,o;if(typeof t.type=="function"){for(r=t.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=t,e=ze(r[o],e,n,i));return e}t.__e!=e&&(i&&(e&&t.type&&!e.parentNode&&(e=R(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Ut(t,e,n,i){var r,o,_,u=t.key,f=t.type,a=e[n],c=a!=null&&(2&a.__u)==0;if(a===null&&u==null||c&&u==a.key&&f==a.type)return n;if(i>(c?1:0)){for(r=n-1,o=n+1;r>=0||o<e.length;)if((a=e[_=r>=0?r--:o++])!=null&&(2&a.__u)==0&&u==a.key&&f==a.type)return _}return-1}function Be(t,e,n){e[0]=="-"?t.setProperty(e,n==null?"":n):t[e]=n==null?"":typeof n!="number"||Dt.test(e)?n:n+"px"}function ne(t,e,n,i,r){var o,_;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||Be(t.style,e,"");if(n)for(e in n)i&&n[e]==i[e]||Be(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(Re,"$1")),_=e.toLowerCase(),e=_ in t||e=="onFocusOut"||e=="onFocusIn"?_.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?i?n.u=i.u:(n.u=ge,t.addEventListener(e,o?de:he,o)):t.removeEventListener(e,o?de:he,o);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n==null?"":n;break e}catch(u){}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Oe(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=ge++;else if(e.t<n.u)return;return n(d.event?d.event(e):e)}}}function be(t,e,n,i,r,o,_,u,f,a){var c,s,h,l,g,C,b,m,p,y,$,w,N,D,H,Q,pe,P=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(f=!!(32&n.__u),o=[u=e.__e=n.__e]),(c=d.__b)&&c(e);e:if(typeof P=="function")try{if(m=e.props,p="prototype"in P&&P.prototype.render,y=(c=P.contextType)&&i[c.__c],$=c?y?y.props.value:c.__:i,n.__c?b=(s=e.__c=n.__c).__=s.__E:(p?e.__c=s=new P(m,$):(e.__c=s=new W(m,$),s.constructor=P,s.render=It),y&&y.sub(s),s.state||(s.state={}),s.__n=i,h=s.__d=!0,s.__h=[],s._sb=[]),p&&s.__s==null&&(s.__s=s.state),p&&P.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=A({},s.__s)),A(s.__s,P.getDerivedStateFromProps(m,s.__s))),l=s.props,g=s.state,s.__v=e,h)p&&P.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),p&&s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(p&&P.getDerivedStateFromProps==null&&m!==l&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(m,$),e.__v==n.__v||!s.__e&&s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(m,s.__s,$)===!1){for(e.__v!=n.__v&&(s.props=m,s.state=s.__s,s.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(L){L&&(L.__=e)}),w=0;w<s._sb.length;w++)s.__h.push(s._sb[w]);s._sb=[],s.__h.length&&_.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(m,s.__s,$),p&&s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(l,g,C)})}if(s.context=$,s.props=m,s.__P=t,s.__e=!1,N=d.__r,D=0,p){for(s.state=s.__s,s.__d=!1,N&&N(e),c=s.render(s.props,s.state,s.context),H=0;H<s._sb.length;H++)s.__h.push(s._sb[H]);s._sb=[]}else do s.__d=!1,N&&N(e),c=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++D<25);s.state=s.__s,s.getChildContext!=null&&(i=A(A({},i),s.getChildContext())),p&&!h&&s.getSnapshotBeforeUpdate!=null&&(C=s.getSnapshotBeforeUpdate(l,g)),Q=c,c!=null&&c.type===F&&c.key==null&&(Q=Ke(c.props.children)),u=Je(t,_e(Q)?Q:[Q],e,n,i,r,o,_,u,f,a),s.base=e.__e,e.__u&=-161,s.__h.length&&_.push(s),b&&(s.__E=s.__=null)}catch(L){if(e.__v=null,f||o!=null)if(L.then){for(e.__u|=f?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;o[o.indexOf(u)]=null,e.__e=u}else{for(pe=o.length;pe--;)ye(o[pe]);ve(e)}else e.__e=n.__e,e.__k=n.__k,L.then||ve(e);d.__e(L,e,n)}else o==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):u=e.__e=Ht(n.__e,e,n,i,r,o,_,f,a);return(c=d.diffed)&&c(e),128&e.__u?void 0:u}function ve(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(ve)}function Ze(t,e,n){for(var i=0;i<n.length;i++)ke(n[i],n[++i],n[++i]);d.__c&&d.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(o){o.call(r)})}catch(o){d.__e(o,r.__v)}})}function Ke(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:_e(t)?t.map(Ke):A({},t)}function Ht(t,e,n,i,r,o,_,u,f){var a,c,s,h,l,g,C,b=n.props||X,m=e.props,p=e.type;if(p=="svg"?r="http://www.w3.org/2000/svg":p=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),o!=null){for(a=0;a<o.length;a++)if((l=o[a])&&"setAttribute"in l==!!p&&(p?l.localName==p:l.nodeType==3)){t=l,o[a]=null;break}}if(t==null){if(p==null)return document.createTextNode(m);t=document.createElementNS(r,p,m.is&&m),u&&(d.__m&&d.__m(e,o),u=!1),o=null}if(p==null)b===m||u&&t.data==m||(t.data=m);else{if(o=o&&re.call(t.childNodes),!u&&o!=null)for(b={},a=0;a<t.attributes.length;a++)b[(l=t.attributes[a]).name]=l.value;for(a in b)if(l=b[a],a!="children"){if(a=="dangerouslySetInnerHTML")s=l;else if(!(a in m)){if(a=="value"&&"defaultValue"in m||a=="checked"&&"defaultChecked"in m)continue;ne(t,a,null,l,r)}}for(a in m)l=m[a],a=="children"?h=l:a=="dangerouslySetInnerHTML"?c=l:a=="value"?g=l:a=="checked"?C=l:u&&typeof l!="function"||b[a]===l||ne(t,a,l,b[a],r);if(c)u||s&&(c.__html==s.__html||c.__html==t.innerHTML)||(t.innerHTML=c.__html),e.__k=[];else if(s&&(t.innerHTML=""),Je(e.type=="template"?t.content:t,_e(h)?h:[h],e,n,i,p=="foreignObject"?"http://www.w3.org/1999/xhtml":r,o,_,o?o[0]:n.__k&&R(n,0),u,f),o!=null)for(a=o.length;a--;)ye(o[a]);u||(a="value",p=="progress"&&g==null?t.removeAttribute("value"):g!=null&&(g!==t[a]||p=="progress"&&!g||p=="option"&&g!=b[a])&&ne(t,a,g,b[a],r),a="checked",C!=null&&C!=t[a]&&ne(t,a,C,b[a],r))}return t}function ke(t,e,n){try{if(typeof t=="function"){var i=typeof t.__u=="function";i&&t.__u(),i&&e==null||(t.__u=t(e))}else t.current=e}catch(r){d.__e(r,n)}}function Qe(t,e,n){var i,r;if(d.unmount&&d.unmount(t),(i=t.ref)&&(i.current&&i.current!=t.__e||ke(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){d.__e(o,e)}i.base=i.__P=null}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&Qe(i[r],e,n||typeof t.type!="function");n||ye(t.__e),t.__c=t.__=t.__e=void 0}function It(t,e,n){return this.constructor(t,n)}function Ye(t,e,n){var i,r,o,_;e==document&&(e=document.documentElement),d.__&&d.__(t,e),r=(i=typeof n=="function")?null:n&&n.__k||e.__k,o=[],_=[],be(e,t=(!i&&n||e).__k=Mt(F,null,[t]),r||X,X,e.namespaceURI,!i&&n?[n]:r?null:e.firstChild?re.call(e.childNodes):null,o,!i&&n?n:r?r.__e:e.firstChild,i,_),Ze(o,t,_)}re=Ve.slice,d={__e:function(t,e,n,i){for(var r,o,_;e=e.__;)if((r=e.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(t)),_=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),_=r.__d),_)return r.__E=r}catch(u){t=u}throw t}},qe=0,me=function(t){return t!=null&&t.constructor===void 0},W.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=A({},this.state),typeof t=="function"&&(t=t(A({},n),this.props)),t&&A(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),je(this))},W.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),je(this))},W.prototype.render=F,j=[],Le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,We=function(t,e){return t.__v.__b-e.__v.__b},oe.__r=0,Re=/(PointerCapture)$|Capture$/i,ge=0,he=Oe(!1),de=Oe(!0),At=0;var ee,k,xe,Xe,we=0,st=[],S=d,et=S.__b,tt=S.__r,nt=S.diffed,it=S.__c,ot=S.unmount,rt=S.__;function Ce(t,e){S.__h&&S.__h(k,t,we||e),we=0;var n=k.__H||(k.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function B(t){return we=1,jt(ut,t)}function jt(t,e,n){var i=Ce(ee++,2);if(i.t=t,!i.__c&&(i.__=[n?n(e):ut(void 0,e),function(u){var f=i.__N?i.__N[0]:i.__[0],a=i.t(f,u);f!==a&&(i.__N=[a,i.__[1]],i.__c.setState({}))}],i.__c=k,!k.__f)){var r=function(u,f,a){if(!i.__c.__H)return!0;var c=i.__c.__H.__.filter(function(h){return!!h.__c});if(c.every(function(h){return!h.__N}))return!o||o.call(this,u,f,a);var s=i.__c.props!==u;return c.forEach(function(h){if(h.__N){var l=h.__[0];h.__=h.__N,h.__N=void 0,l!==h.__[0]&&(s=!0)}}),o&&o.call(this,u,f,a)||s};k.__f=!0;var o=k.shouldComponentUpdate,_=k.componentWillUpdate;k.componentWillUpdate=function(u,f,a){if(this.__e){var c=o;o=void 0,r(u,f,a),o=c}_&&_.call(this,u,f,a)},k.shouldComponentUpdate=r}return i.__N||i.__}function Ee(t,e){var n=Ce(ee++,3);!S.__s&&at(n.__H,e)&&(n.__=t,n.u=e,k.__H.__h.push(n))}function V(t,e){var n=Ce(ee++,7);return at(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Bt(){for(var t;t=st.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(se),t.__H.__h.forEach(Se),t.__H.__h=[]}catch(e){t.__H.__h=[],S.__e(e,t.__v)}}S.__b=function(t){k=null,et&&et(t)},S.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),rt&&rt(t,e)},S.__r=function(t){tt&&tt(t),ee=0;var e=(k=t.__c).__H;e&&(xe===k?(e.__h=[],k.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(se),e.__h.forEach(Se),e.__h=[],ee=0)),xe=k},S.diffed=function(t){nt&&nt(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(st.push(e)!==1&&Xe===S.requestAnimationFrame||((Xe=S.requestAnimationFrame)||Ot)(Bt)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),xe=k=null},S.__c=function(t,e){e.some(function(n){try{n.__h.forEach(se),n.__h=n.__h.filter(function(i){return!i.__||Se(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],S.__e(i,n.__v)}}),it&&it(t,e)},S.unmount=function(t){ot&&ot(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{se(i)}catch(r){e=r}}),n.__H=void 0,e&&S.__e(e,n.__v))};var _t=typeof requestAnimationFrame=="function";function Ot(t){var e,n=function(){clearTimeout(i),_t&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,35);_t&&(e=requestAnimationFrame(n))}function se(t){var e=k,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),k=e}function Se(t){var e=k;t.__c=t.__(),k=e}function at(t,e){return!t||t.length!==e.length||e.some(function(n,i){return n!==t[i]})}function ut(t,e){return typeof e=="function"?e(t):e}var qt=Symbol.for("preact-signals");function ue(){if(U>1)U--;else{for(var t,e=!1;te!==void 0;){var n=te;for(te=void 0,Te++;n!==void 0;){var i=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&ct(n))try{n.c()}catch(r){e||(t=r,e=!0)}n=i}}if(Te=0,U--,e)throw t}}function $e(t){if(U>0)return t();U++;try{return t()}finally{ue()}}var v=void 0;function Ne(t){var e=v;v=void 0;try{return t()}finally{v=e}}var te=void 0,U=0,Te=0,ae=0;function ft(t){if(v!==void 0){var e=t.n;if(e===void 0||e.t!==v)return e={i:0,S:t,p:v.s,n:void 0,t:v,e:void 0,x:void 0,r:e},v.s!==void 0&&(v.s.n=e),v.s=e,t.n=e,32&v.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=v.s,e.n=void 0,v.s.n=e,v.s=e),e}}function x(t,e){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=e==null?void 0:e.watched,this.Z=e==null?void 0:e.unwatched,this.name=e==null?void 0:e.name}x.prototype.brand=qt;x.prototype.h=function(){return!0};x.prototype.S=function(t){var e=this,n=this.t;n!==t&&t.e===void 0&&(t.x=n,this.t=t,n!==void 0?n.e=t:Ne(function(){var i;(i=e.W)==null||i.call(e)}))};x.prototype.U=function(t){var e=this;if(this.t!==void 0){var n=t.e,i=t.x;n!==void 0&&(n.x=i,t.e=void 0),i!==void 0&&(i.e=n,t.x=void 0),t===this.t&&(this.t=i,i===void 0&&Ne(function(){var r;(r=e.Z)==null||r.call(e)}))}};x.prototype.subscribe=function(t){var e=this;return q(function(){var n=e.value,i=v;v=void 0;try{t(n)}finally{v=i}},{name:"sub"})};x.prototype.valueOf=function(){return this.value};x.prototype.toString=function(){return this.value+""};x.prototype.toJSON=function(){return this.value};x.prototype.peek=function(){var t=v;v=void 0;try{return this.value}finally{v=t}};Object.defineProperty(x.prototype,"value",{get:function(){var t=ft(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(Te>100)throw new Error("Cycle detected");this.v=t,this.i++,ae++,U++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{ue()}}}});function fe(t,e){return new x(t,e)}function ct(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function lt(t){for(var e=t.s;e!==void 0;e=e.n){var n=e.S.n;if(n!==void 0&&(e.r=n),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function pt(t){for(var e=t.s,n=void 0;e!==void 0;){var i=e.p;e.i===-1?(e.S.U(e),i!==void 0&&(i.n=e.n),e.n!==void 0&&(e.n.p=i)):n=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=i}t.s=n}function O(t,e){x.call(this,void 0),this.x=t,this.s=void 0,this.g=ae-1,this.f=4,this.W=e==null?void 0:e.watched,this.Z=e==null?void 0:e.unwatched,this.name=e==null?void 0:e.name}O.prototype=new x;O.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===ae))return!0;if(this.g=ae,this.f|=1,this.i>0&&!ct(this))return this.f&=-2,!0;var t=v;try{lt(this),v=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return v=t,pt(this),this.f&=-2,!0};O.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}x.prototype.S.call(this,t)};O.prototype.U=function(t){if(this.t!==void 0&&(x.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};O.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(O.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=ft(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function ce(t,e){return new O(t,e)}function ht(t){var e=t.u;if(t.u=void 0,typeof e=="function"){U++;var n=v;v=void 0;try{e()}catch(i){throw t.f&=-2,t.f|=8,Pe(t),i}finally{v=n,ue()}}}function Pe(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,ht(t)}function Lt(t){if(v!==this)throw new Error("Out-of-order effect");pt(this),v=t,this.f&=-2,8&this.f&&Pe(this),ue()}function G(t,e){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=e==null?void 0:e.name}G.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};G.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,ht(this),lt(this),U++;var t=v;return v=this,Lt.bind(this,t)};G.prototype.N=function(){2&this.f||(this.f|=2,this.o=te,te=this)};G.prototype.d=function(){this.f|=8,1&this.f||Pe(this)};G.prototype.dispose=function(){this.d()};function q(t,e){var n=new G(t,e);try{n.c()}catch(r){throw n.d(),r}var i=n.d.bind(n);return i[Symbol.dispose]=i,i}var dt,De,Ae,Wt=typeof window!="undefined"&&!!window.__PREACT_SIGNALS_DEVTOOLS__;var vt=[];q(function(){dt=this.N})();function J(t,e){d[t]=e.bind(null,d[t]||function(){})}function le(t){Ae&&Ae(),Ae=t&&t.S()}function mt(t){var e=this,n=t.data,i=Vt(n);i.value=n;var r=V(function(){for(var u=e,f=e.__v;f=f.__;)if(f.__c){f.__c.__$f|=4;break}var a=ce(function(){var l=i.value.value;return l===0?0:l===!0?"":l||""}),c=ce(function(){return!Array.isArray(a.value)&&!me(a.value)}),s=q(function(){if(this.N=gt,c.value){var l=a.value;u.__v&&u.__v.__e&&u.__v.__e.nodeType===3&&(u.__v.__e.data=l)}}),h=e.__$u.d;return e.__$u.d=function(){s(),h.call(this)},[c,a]},[]),o=r[0],_=r[1];return o.value?_.peek():_.value}mt.displayName="ReactiveTextNode";Object.defineProperties(x.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:mt},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});J("__b",function(t,e){if(typeof e.type=="string"){var n,i=e.props;for(var r in i)if(r!=="children"){var o=i[r];o instanceof x&&(n||(e.__np=n={}),n[r]=o,i[r]=o.peek())}}t(e)});J("__r",function(t,e){if(e.type!==F){le();var n,i=e.__c;i&&(i.__$f&=-2,(n=i.__$u)===void 0&&(i.__$u=n=(function(r,o){var _;return q(function(){_=this},{name:o}),_.c=r,_})(function(){var r;Wt&&((r=n.y)==null||r.call(n)),i.__$f|=1,i.setState({})},typeof e.type=="function"?e.type.displayName||e.type.name:""))),De=i,le(n)}t(e)});J("__e",function(t,e,n,i){le(),De=void 0,t(e,n,i)});J("diffed",function(t,e){le(),De=void 0;var n;if(typeof e.type=="string"&&(n=e.__e)){var i=e.__np,r=e.props;if(i){var o=n.U;if(o)for(var _ in o){var u=o[_];u!==void 0&&!(_ in i)&&(u.d(),o[_]=void 0)}else o={},n.U=o;for(var f in i){var a=o[f],c=i[f];a===void 0?(a=Rt(n,f,c,r),o[f]=a):a.o(c,r)}}}t(e)});function Rt(t,e,n,i){var r=e in t&&t.ownerSVGElement===void 0,o=fe(n);return{o:function(_,u){o.value=_,i=u},d:q(function(){this.N=gt;var _=o.value.value;i[e]!==_&&(i[e]=_,r?t[e]=_:_!=null&&(_!==!1||e[4]==="-")?t.setAttribute(e,_):t.removeAttribute(e))})}}J("unmount",function(t,e){if(typeof e.type=="string"){var n=e.__e;if(n){var i=n.U;if(i){n.U=void 0;for(var r in i){var o=i[r];o&&o.d()}}}}else{var _=e.__c;if(_){var u=_.__$u;u&&(_.__$u=void 0,u.d())}}t(e)});J("__h",function(t,e,n,i){(i<3||i===9)&&(e.__$f|=2),t(e,n,i)});W.prototype.shouldComponentUpdate=function(t,e){var n=this.__$u,i=n&&n.s!==void 0;for(var r in e)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var o=2&this.__$f;if(!(i||o||4&this.__$f)||1&this.__$f)return!0}else if(!(i||4&this.__$f)||3&this.__$f)return!0;for(var _ in t)if(_!=="__source"&&t[_]!==this.props[_])return!0;for(var u in this.props)if(!(u in t))return!0;return!1};function Vt(t,e){return B(function(){return fe(t,e)})[0]}var Gt=function(t){queueMicrotask(function(){queueMicrotask(t)})};function Jt(){$e(function(){for(var t;t=vt.shift();)dt.call(t)})}function gt(){vt.push(this)===1&&(d.requestAnimationFrame||Gt)(Jt)}var Me=globalThis.shopify;Me&&typeof Me.setSignals=="function"&&Me.setSignals(x);var zt=0;function E(t,e,n,i,r,o){e||(e={});var _,u,f=e;if("ref"in f)for(u in f={},e)u=="ref"?_=e[u]:f[u]=e[u];var a={type:t,props:f,key:n,ref:_,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--zt,__i:-1,__u:0,__source:r,__self:o};if(typeof t=="function"&&(_=t.defaultProps))for(u in _)f[u]===void 0&&(f[u]=_[u]);return d.vnode&&d.vnode(a),a}var Z="custom",K="function-configuration",wt="json",T={triggerBE:6,amountPerTrigger:10,maxDiscount:0,showConfigInMessage:!1};function yt(t){let e=Number(t);return Number.isFinite(e)?`$${e.toFixed(2)}`:"$0.00"}function Fe(t,e){let n=Math.floor(Number(t));return Number.isFinite(n)&&n>0?n:e}function z(t,e){let n=Number(t);return Number.isFinite(n)&&n>=0?n:e}function Zt(t){if(typeof t!="string"||!t.trim())return null;try{return JSON.parse(t)}catch(e){return null}}function bt(){let t=shopify==null?void 0:shopify.data;return t?typeof t=="object"&&t!==null&&"value"in t&&t.value?t.value:t:null}function Kt(t){let e=t==null?void 0:t.metafields;return Array.isArray(e)?e:[]}function Qt(t){return t.find(e=>e&&e.namespace===Z&&e.key===K)||null}function St(t,e){return M(this,null,function*(){var r,o,_;let n=yield fetch("shopify:admin/api/graphql.json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,variables:e})}),i=yield n.json().catch(()=>({}));return n.ok?(r=i.errors)!=null&&r.length?{ok:!1,status:n.status,errors:i.errors,data:(o=i.data)!=null?o:null}:{ok:!0,status:n.status,errors:[],data:(_=i.data)!=null?_:null}:{ok:!1,status:n.status,errors:[{message:"Network error"}],data:null}})}function Yt(t){return M(this,null,function*(){var o,_;if(!t)return null;let e=`
    query GetDiscountConfig($id: ID!) {
      node(id: $id) {
        __typename
        ... on DiscountAutomaticNode {
          metafield(namespace: "${Z}", key: "${K}") {
            id
            type
            value
            namespace
            key
          }
        }
        ... on DiscountCodeNode {
          metafield(namespace: "${Z}", key: "${K}") {
            id
            type
            value
            namespace
            key
          }
        }
      }
    }
  `,n=yield St(e,{id:t});if(!n.ok)return null;let i=(o=n.data)==null?void 0:o.node,r=(_=i==null?void 0:i.metafield)!=null?_:null;return r&&r.namespace===Z&&r.key===K?r:null})}function kt(t,e){return M(this,null,function*(){var _,u,f,a,c,s,h,l,g,C;let n=`
    mutation SetDiscountConfig($ownerId: ID!, $value: String!) {
      metafieldsSet(
        metafields: [{
          ownerId: $ownerId,
          namespace: "${Z}",
          key: "${K}",
          type: "${wt}",
          value: $value
        }]
      ) {
        metafields { id namespace key type value }
        userErrors { field message }
      }
    }
  `,i=JSON.stringify(e),r=yield St(n,{ownerId:t,value:i});if(!r.ok)return{ok:!1,message:(f=(u=(_=r.errors)==null?void 0:_[0])==null?void 0:u.message)!=null?f:"GraphQL error"};let o=(s=(c=(a=r.data)==null?void 0:a.metafieldsSet)==null?void 0:c.userErrors)!=null?s:[];return o.length?{ok:!1,message:o.map(b=>b.message).join("; ")}:{ok:!0,metafield:(C=(g=(l=(h=r.data)==null?void 0:h.metafieldsSet)==null?void 0:l.metafields)==null?void 0:g[0])!=null?C:null}})}function xt(t){return M(this,null,function*(){let e=JSON.stringify(t);return yield shopify.applyMetafieldChange({type:"updateMetafield",namespace:Z,key:K,valueType:wt,value:e})})}function Xt(){let t=bt(),e=V(()=>Kt(t),[t]),n=V(()=>Qt(e),[e]),[i,r]=B(T),[o,_]=B(T),[u,f]=B(!0),[a,c]=B({tone:"subdued",text:""});Ee(()=>{let p=!1;function y(){return M(this,null,function*(){var $;try{if(f(!0),c({tone:"subdued",text:""}),!(t!=null&&t.id)){c({tone:"critical",text:"Missing discount context (shopify.data.id). Open this page from a discount details screen."});return}let w=n;if(w||(w=yield Yt(t.id)),w!=null&&w.value){let D=Zt(w.value),H=D?I(I({},T),D):T;p||(r(H),_(H));return}let N=yield xt(T);if((N==null?void 0:N.type)==="error"){let D=yield kt(t.id,T);!D.ok&&!p&&c({tone:"critical",text:`Couldn't create config: ${D.message}`})}p||(r(T),_(T))}catch(w){p||c({tone:"critical",text:`Failed to load settings: ${($=w==null?void 0:w.message)!=null?$:String(w)}`})}finally{p||f(!1)}})}return y(),()=>{p=!0}},[t==null?void 0:t.id,n==null?void 0:n.id]);let s=V(()=>{let p=[];return p.push(`${Fe(o.triggerBE,T.triggerBE)} BE`),p.push(`${yt(z(o.amountPerTrigger,T.amountPerTrigger))} per trigger`),z(o.maxDiscount,0)>0&&p.push(`cap ${yt(o.maxDiscount)}`),p.join(" \u2022 ")},[o]),h=()=>M(null,null,function*(){var $;c({tone:"subdued",text:""});let p={triggerBE:Fe(o.triggerBE,T.triggerBE),amountPerTrigger:z(o.amountPerTrigger,T.amountPerTrigger),maxDiscount:z(o.maxDiscount,0),showConfigInMessage:!!o.showConfigInMessage},y=yield xt(p);if((y==null?void 0:y.type)==="error"){let w=bt(),N=yield kt(w==null?void 0:w.id,p);if(!N.ok){c({tone:"critical",text:`Save failed: ${($=y.message)!=null?$:"applyMetafieldChange error"}; ${N.message}`});return}}r(p),_(p),c({tone:"subdued",text:"Saved."})}),l=()=>{_(i),c({tone:"subdued",text:"Reverted changes."})},g=p=>{_(y=>Y(I({},y),{triggerBE:Fe(p,T.triggerBE)}))},C=p=>{_(y=>Y(I({},y),{amountPerTrigger:z(p,T.amountPerTrigger)}))},b=p=>{_(y=>Y(I({},y),{maxDiscount:z(p,0)}))},m=p=>{_(y=>Y(I({},y),{showConfigInMessage:!!p}))};return E("s-function-settings",{onSubmit:h,onReset:l,children:E("s-stack",{gap:"large",children:[E("s-text",{variant:"headingLg",children:"Basket Booster configuration"}),a.text?E("s-text",{tone:a.tone,children:a.text}):null,E("s-stack",{gap:"small",children:[E("s-text",{variant:"headingMd",children:"Preview"}),E("s-text",{children:o.showConfigInMessage?s:"Config details hidden in message"})]}),E("s-stack",{gap:"base",children:[E("s-number-field",{label:"Bottle Equivalents required per trigger (BE)",value:String(o.triggerBE),onChange:g,min:1,step:1,helpText:"Example: 6 BE triggers the discount once; 12 BE triggers it twice, etc.",disabled:u}),E("s-number-field",{label:"Discount amount per trigger",value:String(o.amountPerTrigger),onChange:C,min:0,step:.01,helpText:"Fixed dollar amount applied per trigger.",disabled:u}),E("s-number-field",{label:"Maximum discount cap (0 = no cap)",value:String(o.maxDiscount),onChange:b,min:0,step:.01,helpText:"Optional: set an overall cap for this discount. Use 0 for no cap.",disabled:u}),E("s-checkbox",{checked:!!o.showConfigInMessage,onChange:m,disabled:u,children:"Show config details in discount message"}),E("s-text",{tone:"subdued",children:"Stored on discount metafield: custom.function-configuration"})]})]})})}var Ct=()=>M(null,null,function*(){Ye(E(Xt,{}),document.body)});shopify.extend("admin.discount-details.function-settings.render",(...t)=>Ct(...t));})();
//# sourceMappingURL=be-discount-settings.js.map
