import{useSignal}from"@preact/signals";import{createElement as t,Fragment as n}from"preact";import{useMemo as r}from"preact/hooks";const e=t=>"function"==typeof t.children?t.children(t.v,t.i):t.children;e.displayName="Item";function o(n){const r="function"==typeof n.when?n.when():n.when.value;if(!r)return n.fallback||null;else return t(e,{v:r,children:n.children})}o.displayName="Show";function c(o){const c=r(()=>new Map,[]);let i=("function"==typeof o.each?o.each():o.each).value;if(!i.length)return o.fallback||null;const u=new Set(c.keys()),f=i.map((n,r)=>{u.delete(n);if(!c.has(n)){const i=t(e,{v:n,i:r,children:o.children});c.set(n,i);return i}return c.get(n)});u.forEach(t=>{c.delete(t)});return t(n,null,f)}c.displayName="For";function i(t){const n=useSignal(t);if(n.peek()!==t)n.value=t;return n}function u(t){const n=useSignal(t);if(!("current"in n))Object.defineProperty(n,"current",f);return n}const f={configurable:!0,get(){return this.value},set(t){this.value=t}};export{c as For,o as Show,i as useLiveSignal,u as useSignalRef};//# sourceMappingURL=utils.mjs.map
